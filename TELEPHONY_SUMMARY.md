# ‚úÖ –ü–Ü–î–°–£–ú–û–ö –Ü–ù–¢–ï–ì–†–ê–¶–Ü–á BINOTEL –¢–ï–õ–ï–§–û–ù–Ü–á

## üìã –©–û –ó–†–û–ë–õ–ï–ù–û:

### 1. –°—Ç–≤–æ—Ä–µ–Ω–æ –Ω–æ–≤—ñ —Ñ–∞–π–ª–∏ –≤ –ø–∞–ø—Ü—ñ telephony/:

```
telephony/
‚îú‚îÄ‚îÄ __init__.py                    # ‚úÖ –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –ø–∞–∫–µ—Ç—É
‚îú‚îÄ‚îÄ config.py                      # ‚úÖ –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è Binotel + Google Cloud
‚îú‚îÄ‚îÄ models.py                      # ‚úÖ –ú–æ–¥–µ–ª—ñ –¥–∞–Ω–∏—Ö –¥–ª—è Binotel
‚îú‚îÄ‚îÄ telephony_service.py           # ‚úÖ –°–µ—Ä–≤—ñ—Å –∑ Google Speech-to-Text + TTS
‚îú‚îÄ‚îÄ voice_routes.py                # ‚úÖ FastAPI —Ä–æ—É—Ç–∏ –¥–ª—è Binotel
‚îú‚îÄ‚îÄ .env.example                   # ‚úÖ –ü—Ä–∏–∫–ª–∞–¥ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å
‚îú‚îÄ‚îÄ INTEGRATION_README.md          # ‚úÖ –ü–æ–≤–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
‚îî‚îÄ‚îÄ CHANGES.md                     # ‚úÖ –ö–æ—Ä–æ—Ç–∫–∏–π –≥–∞–π–¥
```

### 2. –û–Ω–æ–≤–ª–µ–Ω–æ —ñ—Å–Ω—É—é—á—ñ —Ñ–∞–π–ª–∏:

- ‚úÖ **requirements.txt** - –¥–æ–¥–∞–Ω–æ:
  - `google-cloud-speech` (Speech-to-Text)
  - `google-cloud-texttospeech` (Text-to-Speech)
  - –í–∏–¥–∞–ª–µ–Ω–æ `twilio`

- ‚úÖ **main.py** - –¥–æ–¥–∞–Ω–æ:
  - –Ü–º–ø–æ—Ä—Ç —Ç–µ–ª–µ—Ñ–æ–Ω—ñ—ó (–∑ try/except)
  - –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è TelephonyService –≤ lifespan
  - –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —Ä–æ—É—Ç—ñ–≤ `app.include_router(telephony_router)`
  - –¢–µ–ª–µ—Ñ–æ–Ω—ñ—è –ø—Ä–∞—Ü—é—î –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ

### 3. –°—Ö–µ–º–∞ —Ä–æ–±–æ—Ç–∏:

```
üìû –î–∑–≤—ñ–Ω–æ–∫ ‚Üí Binotel ‚Üí üåê –í–∞—à FastAPI —Å–µ—Ä–≤–µ—Ä
                          ‚Üì
                     Google Speech-to-Text (—Ä–æ–∑–ø—ñ–∑–Ω–∞—î —É–∫—Ä–∞—ó–Ω—Å—å–∫—É)
                          ‚Üì
                     Claude AI (–æ–±—Ä–æ–±–ª—è—î –∑–∞–ø–∏—Ç)
                          ‚Üì
                     Google Text-to-Speech (—Å–∏–Ω—Ç–µ–∑—É—î —É–∫—Ä–∞—ó–Ω—Å—å–∫—É)
                          ‚Üì
üìû –í—ñ–¥–ø–æ–≤—ñ–¥—å ‚Üí Binotel ‚Üí üåê –ü–æ–≤–µ—Ä—Ç–∞—î –∞—É–¥—ñ–æ –∫–ª—ñ—î–Ω—Ç—É
```

## üéØ –Ø–ö –ü–†–ê–¶–Æ–Ñ:

1. **–í—Ö—ñ–¥–Ω–∏–π –¥–∑–≤—ñ–Ω–æ–∫**:
   - Binotel –Ω–∞–¥—Å–∏–ª–∞—î –≤–µ–±—Ö—É–∫ ‚Üí `/telephony/binotel/incoming-call`
   - –°–µ—Ä–≤—ñ—Å –≥–µ–Ω–µ—Ä—É—î –ø—Ä–∏–≤—ñ—Ç–∞–Ω–Ω—è: "–í—ñ—Ç–∞—é! –Ø —à—Ç—É—á–Ω–∏–π —ñ–Ω—Ç–µ–ª–µ–∫—Ç —Å–∞–ª–æ–Ω—É –∫—Ä–∞—Å–∏"
   - Google TTS ‚Üí –∞—É–¥—ñ–æ
   - –í—ñ–¥–ø—Ä–∞–≤–ª—è—î –∞—É–¥—ñ–æ –Ω–∞–∑–∞–¥ –≤ Binotel

2. **–†–æ–∑–º–æ–≤–∞**:
   - –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –≥–æ–≤–æ—Ä–∏—Ç—å ‚Üí Binotel –Ω–∞–¥—Å–∏–ª–∞—î –∞—É–¥—ñ–æ ‚Üí `/telephony/binotel/audio-stream`
   - Google Speech-to-Text ‚Üí —Ç–µ–∫—Å—Ç
   - Claude AI –æ–±—Ä–æ–±–ª—è—î (–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —ñ—Å–Ω—É—é—á–∏–π ClaudeService)
   - Google TTS ‚Üí –∞—É–¥—ñ–æ –≤—ñ–¥–ø–æ–≤—ñ–¥—å
   - –í—ñ–¥–ø—Ä–∞–≤–ª—è—î –Ω–∞–∑–∞–¥

3. **–ó–∞–≤–µ—Ä—à–µ–Ω–Ω—è**:
   - Binotel –Ω–∞–¥—Å–∏–ª–∞—î —Å—Ç–∞—Ç—É—Å ‚Üí `/telephony/binotel/call-status`
   - –ó–±–µ—Ä—ñ–≥–∞—î —ñ—Å—Ç–æ—Ä—ñ—é —Ä–æ–∑–º–æ–≤–∏ –≤ –ë–î

## üõ†Ô∏è –ù–ê–õ–ê–®–¢–£–í–ê–ù–ù–Ø (–¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞):

### –ö—Ä–æ–∫ 1: –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
```bash
pip install -r requirements.txt
```

### –ö—Ä–æ–∫ 2: –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ .env
```env
BINOTEL_API_KEY=–≤–∞—à_–∫–ª—é—á_—Ç—É—Ç
BINOTEL_API_SECRET=–≤–∞—à_—Å–µ–∫—Ä–µ—Ç_—Ç—É—Ç
BINOTEL_PHONE_NUMBER=+380XXXXXXXXX
GOOGLE_APPLICATION_CREDENTIALS=credentials.json
```

### –ö—Ä–æ–∫ 3: Google Cloud
1. –°—Ç–≤–æ—Ä–∏—Ç–∏ –ø—Ä–æ–µ–∫—Ç –≤ Google Cloud Console
2. –£–≤—ñ–º–∫–Ω—É—Ç–∏ API:
   - Cloud Speech-to-Text API
   - Cloud Text-to-Speech API
3. –°—Ç–≤–æ—Ä–∏—Ç–∏ Service Account
4. –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ credentials.json ‚Üí –ø–æ–∫–ª–∞—Å—Ç–∏ –≤ –∫–æ—Ä—ñ–Ω—å –ø—Ä–æ–µ–∫—Ç—É

### –ö—Ä–æ–∫ 4: Binotel
–ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –≤–µ–±—Ö—É–∫–∏ (–≤ –æ—Å–æ–±–∏—Å—Ç–æ–º—É –∫–∞–±—ñ–Ω–µ—Ç—ñ):
- –í—Ö—ñ–¥–Ω—ñ: `https://–≤–∞—à-–¥–æ–º–µ–Ω/telephony/binotel/incoming-call`
- –ê—É–¥—ñ–æ: `https://–≤–∞—à-–¥–æ–º–µ–Ω/telephony/binotel/audio-stream`
- –°—Ç–∞—Ç—É—Å: `https://–≤–∞—à-dom–µin/telephony/binotel/call-status`

### –ö—Ä–æ–∫ 5: –ó–∞–ø—É—Å—Ç–∏—Ç–∏
```bash
python main.py
```

## üîç –ü–ï–†–ï–í–Ü–†–ö–ê:

```bash
# Health check
curl http://localhost:8000/telephony/health

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
curl http://localhost:8000/telephony/stats

# –ó–∞–≥–∞–ª—å–Ω–∏–π health
curl http://localhost:8000/health
```

## ‚ö†Ô∏è –í–ê–ñ–õ–ò–í–û:

1. **–ù–µ —á—ñ–ø–∞–≤ —ñ–Ω—à—ñ —á–∞—Å—Ç–∏–Ω–∏ –ø—Ä–æ–µ–∫—Ç—É** ‚úÖ
   - Telegram –±–æ—Ç –ø—Ä–∞—Ü—é—î —è–∫ —Ä–∞–Ω—ñ—à–µ
   - –í—Å—ñ —ñ—Å–Ω—É—é—á—ñ –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏ –±–µ–∑ –∑–º—ñ–Ω
   - ClaudeService, BookingService - –±–µ–∑ –∑–º—ñ–Ω

2. **–¢–µ–ª–µ—Ñ–æ–Ω—ñ—è - –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–∞** ‚úÖ
   - –ë–µ–∑ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å Binotel - —Å–µ—Ä–≤–µ—Ä –ø—Ä–∞—Ü—é—î
   - –ü–æ–º–∏–ª–∫–∏ —ñ–º–ø–æ—Ä—Ç—É telephony - –Ω–µ –ø–∞–¥–∞—î
   - try/except –±–ª–æ–∫–∏ –≤—Å—é–¥–∏

3. **–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —ñ—Å–Ω—É—é—á—É –ª–æ–≥—ñ–∫—É** ‚úÖ
   - ClaudeService –¥–ª—è AI
   - BookingService –¥–ª—è –±—Ä–æ–Ω—é–≤–∞–Ω—å
   - GoogleSheetsService –¥–ª—è —Å–ª–æ—Ç—ñ–≤
   - Dialogue –ë–î –¥–ª—è —ñ—Å—Ç–æ—Ä—ñ—ó

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è:

–î–µ—Ç–∞–ª—å–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó ‚Üí `telephony/INTEGRATION_README.md`

## ‚úÖ –ì–û–¢–û–í–û –î–û –í–ò–ö–û–†–ò–°–¢–ê–ù–ù–Ø!

–¢–µ–ª–µ—Ñ–æ–Ω—ñ—è –ø–æ–≤–Ω—ñ—Å—Ç—é —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–∞ –∑ Binotel + Google Cloud.
–í—Å—ñ —ñ–Ω—à—ñ —á–∞—Å—Ç–∏–Ω–∏ –ø—Ä–æ–µ–∫—Ç—É –ø—Ä–∞—Ü—é—é—Ç—å –±–µ–∑ –∑–º—ñ–Ω.
