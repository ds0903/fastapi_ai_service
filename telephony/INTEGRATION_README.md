# üìû –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è Binotel –¢–µ–ª–µ—Ñ–æ–Ω—ñ—ó

## ‚úÖ –©–æ –∑—Ä–æ–±–ª–µ–Ω–æ

### 1. –ü–µ—Ä–µ—Ä–æ–±–∫–∞ –Ω–∞ Binotel
- ‚ùå –í–∏–¥–∞–ª–µ–Ω–æ Twilio
- ‚úÖ –î–æ–¥–∞–Ω–æ Binotel API
- ‚úÖ –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Google Cloud Speech-to-Text
- ‚úÖ –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Google Cloud Text-to-Speech

### 2. –°—Ö–µ–º–∞ —Ä–æ–±–æ—Ç–∏
```
–î–∑–≤—ñ–Ω–æ–∫ ‚Üí Binotel ‚Üí –í–∞—à —Å–µ—Ä–≤–µ—Ä ‚Üí Google Speech ‚Üí Claude ‚Üí Google TTS ‚Üí Binotel ‚Üí –ö–ª—ñ—î–Ω—Ç
```

### 3. –§–∞–π–ª–∏

#### –û–Ω–æ–≤–ª–µ–Ω—ñ —Ñ–∞–π–ª–∏:
- `telephony/config.py` - –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è Binotel
- `telephony/models.py` - –º–æ–¥–µ–ª—ñ –¥–ª—è Binotel –≤–µ–±—Ö—É–∫—ñ–≤
- `telephony/telephony_service.py` - —Å–µ—Ä–≤—ñ—Å –∑ Google Speech/TTS
- `telephony/voice_routes.py` - API —Ä–æ—É—Ç–∏ –¥–ª—è Binotel
- `requirements.txt` - –¥–æ–¥–∞–Ω–æ Google Cloud –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏
- `main.py` - —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è —Ç–µ–ª–µ—Ñ–æ–Ω—ñ—ó

## üöÄ –Ø–∫ –∑–∞–ø—É—Å—Ç–∏—Ç–∏

### 1. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
```bash
pip install -r requirements.txt
```

### 2. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ .env
–°—Ç–≤–æ—Ä—ñ—Ç—å `.env` —Ñ–∞–π–ª –∑ –Ω–∞—Å—Ç—É–ø–Ω–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:

```env
# Binotel
BINOTEL_API_KEY=your_api_key
BINOTEL_API_SECRET=your_secret
BINOTEL_PHONE_NUMBER=+380XXXXXXXXX

# Google Cloud
GOOGLE_APPLICATION_CREDENTIALS=credentials.json
```

### 3. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ Google Cloud

1. –°—Ç–≤–æ—Ä—ñ—Ç—å –ø—Ä–æ–µ–∫—Ç –≤ Google Cloud Console
2. –£–≤—ñ–º–∫–Ω—ñ—Ç—å API:
   - Cloud Speech-to-Text API
   - Cloud Text-to-Speech API
3. –°—Ç–≤–æ—Ä—ñ—Ç—å Service Account
4. –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ –∫–ª—é—á JSON —è–∫ `credentials.json`
5. –ü–æ–∫–ª–∞–¥—ñ—Ç—å —Ñ–∞–π–ª –≤ –∫–æ—Ä—ñ–Ω—å –ø—Ä–æ–µ–∫—Ç—É

### 4. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ Binotel

1. –ó–∞–π–¥—ñ—Ç—å –≤ –æ—Å–æ–±–∏—Å—Ç–∏–π –∫–∞–±—ñ–Ω–µ—Ç Binotel
2. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –≤–µ–±—Ö—É–∫–∏:
   - **–í—Ö—ñ–¥–Ω–∏–π –¥–∑–≤—ñ–Ω–æ–∫**: `https://your-domain.com/telephony/binotel/incoming-call`
   - **–ê—É–¥—ñ–æ –ø–æ—Ç—ñ–∫**: `https://your-domain.com/telephony/binotel/audio-stream`
   - **–°—Ç–∞—Ç—É—Å –¥–∑–≤—ñ–Ω–∫–∞**: `https://your-domain.com/telephony/binotel/call-status`
3. –°–∫–æ–ø—ñ—é–π—Ç–µ API –∫–ª—é—á —Ç–∞ —Å–µ–∫—Ä–µ—Ç

### 5. –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä
```bash
python main.py
```

## üì° API Endpoints

### Binotel –≤–µ–±—Ö—É–∫–∏:

**POST /telephony/binotel/incoming-call**
- –û–±—Ä–æ–±–∫–∞ –≤—Ö—ñ–¥–Ω–æ–≥–æ –¥–∑–≤—ñ–Ω–∫–∞
- –ü–æ–≤–µ—Ä—Ç–∞—î –ø—Ä–∏–≤—ñ—Ç–∞–ª—å–Ω–µ –∞—É–¥—ñ–æ

**POST /telephony/binotel/audio-stream**
- –û–±—Ä–æ–±–∫–∞ –∞—É–¥—ñ–æ –≤—ñ–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- –†–æ–∑–ø—ñ–∑–Ω–∞—î –º–æ–≤—É ‚Üí Claude ‚Üí —Å–∏–Ω—Ç–µ–∑—É—î –≤—ñ–¥–ø–æ–≤—ñ–¥—å

**POST /telephony/binotel/call-status**
- –û—Ç—Ä–∏–º—É—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞—Ç—É—Å—É –¥–∑–≤—ñ–Ω–∫–∞

### –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥:

**GET /telephony/stats**
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∞–∫—Ç–∏–≤–Ω–∏—Ö –¥–∑–≤—ñ–Ω–∫—ñ–≤

**GET /telephony/health**
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞–Ω—É —Å–µ—Ä–≤—ñ—Å—É

## üîß –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ

### Google Speech-to-Text
- –ú–æ–≤–∞: Ukrainian (uk-UA)
- –ú–æ–¥–µ–ª—å: phone_call (–æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∞ –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω—ñ—ó)
- Encoding: LINEAR16
- Sample rate: 8000 Hz

### Google Text-to-Speech
- –ì–æ–ª–æ—Å: uk-UA-Wavenet-A (–∂—ñ–Ω–æ—á–∏–π)
- –ú–æ–∂–Ω–∞ –∑–º—ñ–Ω–∏—Ç–∏ –≤ `telephony/config.py`:
  - `voice_name` - –Ω–∞–∑–≤–∞ –≥–æ–ª–æ—Å—É
  - `voice_gender` - MALE –∞–±–æ FEMALE

### –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Claude
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —ñ—Å–Ω—É—é—á–∏–π ClaudeService
- –ü–æ–≤–Ω–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ —Å–∏—Å—Ç–µ–º–æ—é –±—Ä–æ–Ω—é–≤–∞–Ω–Ω—è
- –ó–±–µ—Ä—ñ–≥–∞—î —ñ—Å—Ç–æ—Ä—ñ—é —Ä–æ–∑–º–æ–≤ –≤ –ë–î

## üéØ –©–æ –ø—Ä–∞—Ü—é—î

‚úÖ –†–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—ó –º–æ–≤–∏
‚úÖ –°–∏–Ω—Ç–µ–∑ —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—ó –º–æ–≤–∏
‚úÖ –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Claude AI
‚úÖ –°–∏—Å—Ç–µ–º–∞ –±—Ä–æ–Ω—é–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ —Ç–µ–ª–µ—Ñ–æ–Ω
‚úÖ –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —ñ—Å—Ç–æ—Ä—ñ—ó —Ä–æ–∑–º–æ–≤
‚úÖ –ê–∫—Ç–∏–≤–Ω—ñ –¥–∑–≤—ñ–Ω–∫–∏ –≤ –ø–∞–º'—è—Ç—ñ

## ‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≥–æ–ª–æ—Å—É

–í `telephony/config.py`:

```python
voice_language: str = "uk-UA"
voice_name: str = "uk-UA-Wavenet-A"  # –ñ—ñ–Ω–æ—á–∏–π
# –∞–±–æ
voice_name: str = "uk-UA-Wavenet-B"  # –ß–æ–ª–æ–≤—ñ—á–∏–π
```

–î–æ—Å—Ç—É–ø–Ω—ñ –≥–æ–ª–æ—Å–∏:
- uk-UA-Wavenet-A (–∂—ñ–Ω–∫–∞, –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–∏–π)
- uk-UA-Standard-A (–∂—ñ–Ω–∫–∞, –±–∞–∑–æ–≤–∏–π)

## üìä –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤'—è
curl http://localhost:8000/telephony/health

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
curl http://localhost:8000/telephony/stats
```

## ‚ùó –í–∞–∂–ª–∏–≤–æ

1. **Binotel –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è**: –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å —â–æ –≤–µ–±—Ö—É–∫–∏ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω—ñ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
2. **Google Cloud**: –§–∞–π–ª `credentials.json` –ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ –≤ –∫–æ—Ä–µ–Ω—ñ –ø—Ä–æ–µ–∫—Ç—É
3. **–ú–µ—Ä–µ–∂–∞**: –í–∞—à —Å–µ—Ä–≤–µ—Ä –ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ –¥–æ—Å—Ç—É–ø–Ω–∏–π –∑ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É –¥–ª—è Binotel –≤–µ–±—Ö—É–∫—ñ–≤
4. **HTTPS**: Binotel –≤–∏–º–∞–≥–∞—î HTTPS –¥–ª—è –≤–µ–±—Ö—É–∫—ñ–≤ (–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ Nginx –∑ SSL)

## üêõ Troubleshooting

### Binotel –Ω–µ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î –≤–µ–±—Ö—É–∫–∏
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞ –∑ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ HTTPS —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ Binotel –≤ –æ—Å–æ–±–∏—Å—Ç–æ–º—É –∫–∞–±—ñ–Ω–µ—Ç—ñ

### Google Speech –Ω–µ –ø—Ä–∞—Ü—é—î
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ `GOOGLE_APPLICATION_CREDENTIALS`
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ API —É–≤—ñ–º–∫–Ω–µ–Ω—ñ –≤ Google Cloud
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∫–≤–æ—Ç–∏ Google Cloud

### –ù–µ–º–∞—î –∑–≤—É–∫—É
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ñ–æ—Ä–º–∞—Ç –∞—É–¥—ñ–æ (–º–∞—î –±—É—Ç–∏ LINEAR16, 8000Hz)
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ Binotel –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ç—Ä–∏–º—É—î –∞—É–¥—ñ–æ
